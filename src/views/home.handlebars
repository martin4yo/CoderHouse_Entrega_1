<div class="product_list">
        <table class="table table-bordered">
        <thead>
            <tr>
                <th colspan="4" class="text-center bg-darkblue">Productos Activos</th>
            </tr>
        </thead>
        <thead class="table-primary">
            <tr>
            <th>Codigo</th>
            <th>Titulo</th>
            <th>Descripcion</th>
            <th class="text-end">Precio</th>
            </tr>
        </thead>
        <tbody>          
             {{#each result.payload}}
            {{!-- <li>{{code}} - {{title}} - ${{price}}</li> --}}
            <tr>
            <td>{{code}}</td>
            <td>{{title}}</td>
            <td>{{description}}</td>
            <td class="text-end">${{price}}</td>
            </tr>
            {{/each}}
        </tbody>
        </table>

        <div class="d-flex justify-content-between align-items-center">
        <!-- Combo para seleccionar la cantidad de líneas por página -->
            <div class="d-flex align-items-center">
                <label for="linesPerPage" class="me-2">Mostrar por página:</label>
                <select id="linesPerPage" class="form-select w-auto" onchange="updateLimit(this.value)">
                    <option value="10" {{#if (eq result.limit '10')}}selected{{/if}}>10</option>
                    <option value="15" {{#if (eq result.limit '15')}}selected{{/if}}>15</option>
                    <option value="20" {{#if (eq result.limit '20')}}selected{{/if}}>20</option>
                </select>
            </div>
        <!-- Paginación -->
            <nav aria-label="Paginación">
            
                <ul class="pagination justify-content-center">
                    <!-- Botón de página anterior -->
                    <li class="page-item">
                        <button class="page-link btn-lg btn-large" onclick="goToPage('{{result.prevLink}}')">
                            <i class="bi bi-chevron-left"></i> <!-- Icono de flecha hacia atrás -->
                        </button>
                    </li>
                    <!-- Número de página actual -->
                    <li class="page-item disabled">
                        <span class="page-link">{{result.page}}</span> <!-- Puedes cambiar 1 por el número de la página actual -->
                    </li>
                    <!-- Botón de página siguiente -->
                    <li class="page-item">
                        <button class="page-link btn-lg btn-large" onclick="goToPage('{{result.nextLink}}')">
                            <i class="bi bi-chevron-right"></i> <!-- Icono de flecha hacia adelante -->
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
</div>

<script>
    // Función para cambiar el número de líneas por página
    function changeLinesPerPage(lines) {
        console.log("Mostrar " + lines + " productos por página.");
        // Aquí puedes agregar la lógica para cambiar la cantidad de productos que se muestran por página
        // y recargar los datos o actualizar la interfaz de acuerdo con la opción seleccionada.
    }

    // Funciones para la paginación
    function goToPage(link) {

          // Convertir el string en un objeto URLSearchParams
        let params = new URLSearchParams(link);

        // Modificar el valor de 'limit'
        const limit = document.getElementById('linesPerPage');
        params.set('limit', limit.value);

        // Obtener el nuevo string con los cambios
        let newQueryString = params.toString();

        // Crear la nueva URL con el parámetro actualizado
        const newUrl = window.location.pathname + '?' + newQueryString;

        // Redirigir a la misma página con el nuevo valor de 'page'
        window.location.href = newUrl;
    }

    function updateLimit(newLimit) {
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.set('limit', newLimit); // Cambia el valor de limit
        window.location.search = urlParams.toString(); // Recarga la página con el nuevo parámetro
    }

</script>